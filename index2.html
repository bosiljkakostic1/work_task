<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Movie Slider</title>
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <style>
    .slider {
      position: relative;
      width: 60%;
      height: 210px;
      left: 20%;
      background-color: black;
      overflow: hidden;
    }
    
    .slider ul {
      position: relative;
      margin: 0;
      padding: 0;
      height: 210px;
      list-style: none;
    }
    
    ul {
      left: 0;
    }
    /*     .slider li {
      float: left;
    } */
    /* Container needed to position the button. Adjust the width as needed */
    
    li {
      display: inline-block;
    }
    
    ul {
      white-space: nowrap;
    }
    
    .container {
      position: relative;
      width: 100%;
    }
    /* Make the image responsive */
    
    img {
      padding: 5px 5px;
      border-radius: 25px;
    }
    /* Style the button and place it in the middle of the container/image */
    
    .btn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      -ms-transform: translate(-50%, -50%);
      background-color: #555;
      color: white;
      font-size: 16px;
      padding: 12px 24px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    
    .btn {
      opacity: 0;
    }
    
    .container:hover .btn {
      background-color: red;
      color: white;
      opacity: 1;
    }
  </style>

</head>

<body>
  <div id="slider_param" data-dir="./images/" data-extension="jpg" data-filenames="i1,i2,i3,i4,i5,i6,i7,i8,i9,i10" data-img-width=200 data-img-height=200 data-slider-rows=3 data-img-in-row=5 data-opposites="false, true, true">
  </div>
  <script>
    // code saparation
    const custSlA = {};
    //Dynamically generate a list: helper function
    custSlA.createElement = function(element, attribute, inner) {
      if (typeof(element) === "undefined") {
        return false;
      }
      if (typeof(inner) === "undefined") {
        inner = "";
      }
      var el = document.createElement(element);
      if (typeof(attribute) === 'object') {
        for (var key in attribute) {
          el.setAttribute(key, attribute[key]);
        }
      }
      if (!Array.isArray(inner)) {
        inner = [inner];
      }
      for (var k = 0; k < inner.length; k++) {
        if (inner[k].tagName) {
          el.appendChild(inner[k]);
        } else {
          el.appendChild(document.createTextNode(inner[k]));
        }
      }
      return el;
    }
    //The contents of the folder with images have to be provided on the server-side
    //(therefore that files/images will reside on the server folder, or in the database).
    //I will assume that we have a string provided via html data-xxx attribute with filenames off images.

    custSlA.createSliders =  function() {
      /*
      template that will be created
      <div class="slider">
        <ul>
          <li>
            <div class="container">
              <img src="./images/i1.jpg" alt="Image 1" width="200" height="200" />
              <button class="btn">Button</button>
            </div>
          </li>
          ............
        </ul>
      </div>
      */
      // read data attributes
      const masterContainer = document.querySelector('#slider_param');
      const dir = masterContainer.getAttribute('data-dir');
      const extension = masterContainer.getAttribute('data-extension');
      const filenames = masterContainer.getAttribute('data-filenames');
      const imgWidth = masterContainer.getAttribute('data-img-width');
      const imgHeight = masterContainer.getAttribute('data-img-height');
      const sliderRows = masterContainer.getAttribute('data-slider-rows');
      const imgInRow = masterContainer.getAttribute('data-img-in-row');
      custSlA.arrOposites = masterContainer.getAttribute('data-opposites').split(",");
      //number of images * imageWidth have to be greater then masterContainer.width
      const arrayFilenames = filenames.split(",");
      var currDivOuter;
      var currUl;
      var currLi, currInnerDiv, currImgObj, currBntObj;
      custSlA.currentFileIndex = 0;
      custSlA.rowsArray = [];
      for (var ii = 1; ii <= sliderRows; ii++) {
        custSlA.rowsArray.push(ii);
      }
      custSlA.rowsArray.forEach(ind => {
        custSlA.currentColumnInLineIndex = 0;
        currDivOuter = 'div' + ind;
        currUl = 'ul' + ind;
        custSlA[currDivOuter] = custSlA.createElement('div', {
          'id': 'slider' + ind,
          'class': 'slider'
        });
        //custSlA.ulWidth = parseInt(imgInRow) * (parseInt(imgWidth) + (2 * 5)); // 5 for padding
        custSlA[currUl] = custSlA.createElement('ul', {
          'id': currUl
        });

        while (custSlA.currentColumnInLineIndex < imgInRow) {
          if (custSlA.currentFileIndex > (arrayFilenames.length - 1)) {
            custSlA.currentFileIndex = 0 // start again from 0 (from beginning)
              // although the parameters should be set on tahat way that all rows have different files
          }
          currImgObj = 'imgObj_' + ind + '_' + custSlA.currentColumnInLineIndex;
          custSlA[currImgObj] = custSlA.createElement('img', {
            "src": dir + arrayFilenames[custSlA.currentFileIndex] + '.' + extension,
            "alt": "Image " + arrayFilenames[custSlA.currentFileIndex],
            "width": imgWidth,
            "height": imgHeight
          });
          currBtnObj = 'btnObj_' + ind + '_' + custSlA.currentColumnInLineIndex;
          custSlA[currBtnObj] = custSlA.createElement('button', {
            "class": "btn"
          }, "Button");
          currInnerDiv = 'innerDiv_' + ind + '_' + custSlA.currentColumnInLineIndex;
          custSlA[currInnerDiv] = custSlA.createElement('div', {
            "class": "container"
          }, [custSlA[currImgObj], custSlA[currBtnObj]]);
          currLi = 'li_' + ind + '_' + custSlA.currentColumnInLineIndex;
          custSlA[currLi] = custSlA.createElement('li', {
            'id': currLi
          }, custSlA[currInnerDiv]);
          custSlA[currUl].appendChild(custSlA[currLi]);
          custSlA.currentColumnInLineIndex++;
          custSlA.currentFileIndex++;
        }
        custSlA[currDivOuter].appendChild(custSlA[currUl]);
        document.querySelector('body').appendChild(custSlA[currDivOuter]);
      });
    }

    custSlA.animations = function() {
      custSlA.rowsArray.forEach(element => {
        custSlA['ul' + element] = $('#ul' + element);
        custSlA.opposite = custSlA.arrOposites[element - 1];
        if (custSlA.arrOposites[element - 1] === 'false') {
          custSlA['ul' + element].css({
            left: -210
          });
        } else {
          custSlA['ul' + element].css({
            left: 0
          });
        }

        custSlA['anim' + element] = function(dur) {
          if (custSlA.arrOposites[element - 1] === 'false') {
            custSlA.animation = {
              left: -210
            };
          } else {
            custSlA.animation = {
              left: 0
            };
          }
          custSlA['ul' + element].animate(custSlA.animation, {
            duration: dur,
            easing: 'linear',
            complete: function() {

              if (custSlA.arrOposites[element - 1] === 'false') {
                //move the first item and put it as last item
                $('#ul' + element + '>li:last').after($('#ul' + element + '>li:first'));
                //set the default item to correct position
                custSlA['ul' + element].css({
                  left: 0
                }, dur);
              } else {
                //move the last item and put it as first item
                $('#ul' + element + '>li:first').before($('#ul' + element + '>li:last'));
                //set the default item to correct position
                custSlA['ul' + element].css({
                  left: -210
                }, dur);
              }
              custSlA['anim' + element](dur);
            }
          });
        }
        custSlA['anim' + element](1500);
        custSlA['ul' + element].mouseenter(function() {
          custSlA['ul' + element].stop(true, false);
          custSlA['anim' + element](2000);
        });
        custSlA['ul' + element].mouseleave(function() {
          custSlA['ul' + element].stop(true, false);
          custSlA['anim' + element](1500);
        });
        // ul.click(function() {
        //     ul.stop(true, false)
        // });
      });
    }
    custSlA.createSliders();
    $(document).ready(function() {
      custSlA.animations();
    });
  </script>
</body>

</html>